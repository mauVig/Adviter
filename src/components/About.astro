---
import { aboutData } from '../data/About';
import { ArrButtons } from './ArrButtons';

const isMobile = `
 function getStyles(data) {
   if (window.innerWidth <= 1024) {
     return {
       backgroundColor: data.back,
       color: data.color
     };
   }
   return {};
 }
`;
---

<div class='bg-textGray pt-32'>
  <div
    class='max-w-screen-2xl mx-auto px-10 2xl:px-0 flex justify-center sm:justify-between pb-16'
  >
    <span
      class='text-2xl px-6 py-1 rounded-3xl bg-AdDarkBlue text-textGray hidden sm:block'
      >BLOG</span
    >
    <span class='text-2xl px-6 py-1 rounded-3xl bg-AdDarkBlue text-textGray'
      >BLOG</span
    >
    <span
      class='text-2xl px-6 py-1 rounded-3xl bg-AdDarkBlue text-textGray hidden sm:block'
      >BLOG</span
    >
  </div>
  {
    aboutData.map((data) => (
      <div
        class={`p-10 relative before:absolute before:top-0 before:right-0 before:h-full ${data.effectBack} before:transition-[width] before:duration-300 before:ease-in-out before:w-9 hover:before:w-full lg:hover:cursor-pointer before:z-0 group hover-text-change`}
        id={`about-${data.title}`}
      >
        <div class='grid grid-cols-4 gap-5 sm:gap-10 py-2 max-w-screen-2xl mx-auto relative lg:after:absolute lg:after:bottom-0 lg:after:left-0 lg:after:w-full lg:after:h-[1px] lg:after:bg-AdDarkBlue'>
          <div class=' col-span-2 grid grid-rows-5'>
            <div class='font-bold col-span-2 row-span-4 flex items-start'>
              <h2 class='text-xl lg:text-AdDarkBlue lg:text-4xl font-bold flex items-center relative z-10 h-20 max-w-[400px]'>
                {data.title}
              </h2>
            </div>
            <div class='row-span-1 z-20 mb-8'>
              <ArrButtons whitch='darkBlue' />
            </div>
          </div>
          <div class='col-span-2 lg:col-span-1'>
            <img
              src={data.imgUrl}
              alt={`Picture about ${data.title}`}
              class='sm:w-72 transition-all duration-500 ease-out lg:opacity-0 lg:translate-y-10 lg:group-hover:opacity-100 lg:group-hover:-translate-y-20'
            />
          </div>

          <p class='text-xs hidden lg:block lg:text-lg lg:leading-6 lg:text-AdDarkBlue font-medium relative z-10'>
            {data.description}
          </p>
        </div>
      </div>
    ))
  }
</div>

<script define:vars={{ aboutData, isMobile }}>
  eval(isMobile);

  aboutData.forEach((data) => {
    const element = document.getElementById(`about-${data.title}`);
    if (element) {
      Object.assign(element.style, getStyles(data));
    }
  });

  window.addEventListener('resize', () => {
    aboutData.forEach((data) => {
      const element = document.getElementById(`about-${data.title}`);
      if (element) {
        Object.assign(element.style, getStyles(data));
      }
    });
  });
</script>

<style>
  @media (width > 1023px) {
    .hover-text-change:hover * {
      color: #ededed !important;
    }
  }
</style>
